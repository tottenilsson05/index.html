<title>Hacking Simulator</title>
<style>
  * { 
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Courier New', monospace;
  }
  body {
    background: #000;
    color: #0f0;
    display: flex;
    flex-direction: column;
    height: 100vh;
    padding: 20px;
  }
  #terminal {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    border: 1px solid #0f0;
    margin-bottom: 10px;
  }
  #input {
    display: flex;
    gap: 10px;
  }
  input {
    flex: 1;
    background: #000;
    border: 1px solid #0f0;
    color: #0f0;
    padding: 5px 10px;
  }
  .anim {
    animation: flicker 0.5s infinite;
  }
  @keyframes flicker {
    0% { opacity: 1; }
    50% { opacity: 0.8; }
    100% { opacity: 1; }
  }
  .success { 
    color: #0f0;
    text-shadow: 0 0 5px #0f0;
  }
  .error { 
    color: #f00;
    text-shadow: 0 0 5px #f00;
  }
  .warning { 
    color: #ff0;
    text-shadow: 0 0 5px #ff0;
  }
  .info { 
    color: #0ff;
    text-shadow: 0 0 5px #0ff;
  }
  .progress {
    width: 100%;
    height: 20px;
    border: 1px solid #0f0;
    margin: 10px 0;
  }
  .progress-bar {
    width: 0%;
    height: 100%;
    background: #0f0;
    transition: width 0.5s;
  }
  #stats {
    display: flex;
    gap: 20px;
    margin-bottom: 10px;
  }
  #inventory {
    margin-bottom: 10px;
    padding: 10px;
    border: 1px solid #0f0;
  }
  #mini-game {
    display: none;
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #0f0;
  }
  .sequence {
    font-family: monospace;
    letter-spacing: 3px;
    margin: 10px 0;
  }
  #tutorial-popup {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #001100;
    border: 1px solid #0f0;
    padding: 15px;
    max-width: 300px;
    display: none;
  }
  .tutorial-highlight {
    border: 2px solid #0ff !important;
    animation: pulse 1s infinite;
  }
  @keyframes pulse {
    0% { border-color: #0ff; }
    50% { border-color: #066; }
    100% { border-color: #0ff; }
  }
  .cursor {
    margin-left: 2px;
    font-weight: bold;
  }
  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }
  .cursor.anim {
    animation: blink 1s infinite;
  }
  #skip-tutorial {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #001100;
    border: 1px solid #0f0;
    color: #0f0;
    padding: 5px 10px;
    cursor: pointer;
  }
  #skip-tutorial:hover {
    background: #002200;
  }
  .fbi-alert {
    color: #f00;
    text-shadow: 0 0 10px #f00;
    font-weight: bold;
    animation: alert-flash 0.5s infinite;
  }

  @keyframes alert-flash {
    0% { opacity: 1; }
    50% { opacity: 0.3; }
    100% { opacity: 1; }
  }

  #fbi-status {
    margin-bottom: 10px;
    padding: 10px;
    border: 1px solid #f00;
    display: none;
  }
  .dollars {
    color: #0f0;
  }
  .dollars::before {
    content: '$';
  }
  .logo {
    color: #0f0;
    font-family: monospace;
    text-align: center;
    margin-bottom: 20px;
    font-size: 12px;
    line-height: 1.2;
    text-shadow: 0 0 5px #0f0;
  }
  .v2-text {
    text-shadow: 0 0 10px currentColor;
    letter-spacing: 1px;
  }
</style>
</head>
<body>
  <pre id="logo" class="logo">
  __  __     ______     ______     __  __     ______     __     __    __    
/\ \_\ \   /\  __ \   /\  ___\   /\ \/ /    /\  ___\   /\ \   /\ "-./  \   
\ \  __ \  \ \  __ \  \ \ \____  \ \  _"-.  \ \___  \  \ \ \  \ \ \-./\ \  
 \ \_\ \_\  \ \_\ \_\  \ \_____\  \ \_\ \_\  \/\_____\  \ \_\  \ \_\ \ \_\ 
  \/_/\/_/   \/_/\/_/   \/_____/   \/_/\/_/   \/_____/   \/_/   \/_/  \/_/
</pre>
  <div id="stats">
    <div>Level: <span id="level">1</span></div>
    <div>Points: <span id="points">0</span></div>
    <div>Systems Hacked: <span id="hacked">0</span></div>
    <div>Crypto: <span id="crypto">0</span></div>
    <div>Cash: <span id="dollars" class="dollars">0</span></div>
  </div>
  <div id="fbi-status">
    <h3 class="fbi-alert">⚠ FBI AGENT DETECTED ⚠</h3>
    <div>Agent Level: <span id="agent-level">0</span></div>
    <div>Time Remaining: <span id="agent-timer">0</span>s</div>
  </div>
  <div id="inventory">
    <h3>Inventory:</h3>
    <div id="tools"></div>
  </div>
  <div id="terminal"></div>
  <div id="mini-game">
    <p id="game-instruction"></p>
    <div class="sequence" id="sequence"></div>
    <input type="text" id="game-input" autocomplete="off">
  </div>
  <div class="progress">
    <div class="progress-bar"></div>
  </div>
  <div id="input">
    <span class="anim">></span>
    <input type="text" id="cmd" autocomplete="off" autofocus>
  </div>
  <div id="tutorial-popup"></div>
  <button id="skip-tutorial">Skip Tutorial</button>

<script>
const terminal = document.getElementById('terminal');
const input = document.getElementById('cmd');
const progressBar = document.querySelector('.progress-bar');
const levelEl = document.getElementById('level');
const pointsEl = document.getElementById('points');
const hackedEl = document.getElementById('hacked');
const cryptoEl = document.getElementById('crypto');
const dollarsEl = document.getElementById('dollars');
const toolsEl = document.getElementById('tools');
const miniGame = document.getElementById('mini-game');
const gameInstruction = document.getElementById('game-instruction');
const sequenceEl = document.getElementById('sequence');
const gameInput = document.getElementById('game-input');
const tutorialPopup = document.getElementById('tutorial-popup');
const skipTutorialBtn = document.getElementById('skip-tutorial');
const fbiStatusEl = document.getElementById('fbi-status');
const agentLevelEl = document.getElementById('agent-level');
const agentTimerEl = document.getElementById('agent-timer');

const TYPE_SPEED = 25; // ms per character

let level = 1;
let points = 0;
let hackedSystems = 0;
let crypto = 0;
let dollars = 0;
let inventory = {
  'Basic Decoder': 1,
  'Port Scanner': 1
};
let fbiAgent = {
  active: false,
  level: 0,
  timeLeft: 0,
  interval: null
};

const tutorial = {
  currentStep: 0,
  steps: [
    { text: "Welcome to HackSim! Let's start with scanning for targets. Type 'scan' to begin.", command: 'scan' },
    { text: "Great! Now let's analyze the target. Type 'analyze' to get target details.", command: 'analyze' },
    { text: "We need to open the required ports. Type 'ports' to use your Port Scanner.", command: 'ports' },
    { text: "Once ports are open, deploy an exploit with the 'exploit' command.", command: 'exploit' },
    { text: "Now we can hack! Type 'hack' to start the breach sequence.", command: 'hack' },
    { text: "You can buy new tools in the shop. Type 'shop' to see available items.", command: 'shop' },
    { text: "Check your inventory anytime with 'inventory'.", command: 'inventory' },
    { text: "Tutorial complete! Type 'help' anytime to see available commands.", command: 'help' }
  ],
  active: true, 
  showNext() {
    if (this.currentStep >= this.steps.length) {
      this.active = false;
      tutorialPopup.style.display = 'none';
      return;
    }
    const step = this.steps[this.currentStep];
    tutorialPopup.innerHTML = `<div class="info">${step.text}</div>`;
    tutorialPopup.style.display = 'block';
    input.classList.add('tutorial-highlight');
  }
};

const targets = [
  {name: 'mainframe', difficulty: 3, reward: 150, ports: 3},
  {name: 'database', difficulty: 2, reward: 100, ports: 2},
  {name: 'firewall', difficulty: 4, reward: 200, ports: 4},
  {name: 'router', difficulty: 1, reward: 50, ports: 1},
  {name: 'server', difficulty: 2, reward: 100, ports: 2},
  {name: 'network', difficulty: 3, reward: 150, ports: 3}
];

const shop = [
  {name: 'Advanced Decoder', price: 500, currency: 'crypto', effect: 'Increases hack success rate by giving 2 extra seconds per hack'},
  {name: 'Crypto Miner', price: 1000, currency: 'crypto', effect: 'Generates 5 crypto every 10 seconds'},
  {name: 'Security Bypass', price: 750, currency: 'crypto', effect: 'Reduces system difficulty level by 1'},
  {name: 'Port Cracker', price: 300, currency: 'crypto', effect: 'Opens additional ports'},
  {name: 'Anti-Trace VPN', price: 1500, currency: 'crypto', effect: 'Gives +10 seconds during FBI encounters'},
  {name: 'System Glitch', price: 2000, currency: 'crypto', effect: 'Chance to instantly open all ports on scan'},
  {name: 'Crypto Amplifier', price: 1200, currency: 'crypto', effect: 'Increases crypto rewards by 50%'},
  {name: 'Time Dilator', price: 1800, currency: 'crypto', effect: 'Slows down hack timer by 25%'},
  {name: 'Auto-Scanner', price: 900, currency: 'crypto', effect: 'Chance to automatically analyze after scan'},
  {name: 'Reward Doubler', price: 2500, currency: 'crypto', effect: 'Doubles points from successful hacks'},
  {name: 'Money Launderer', price: 100, currency: 'dollars', effect: 'Convert crypto to cash at better rates'},
  {name: 'Cash Register', price: 200, currency: 'dollars', effect: 'Generates $5 every 30 seconds'},
  {name: 'Business Front', price: 500, currency: 'dollars', effect: 'Increases dollar rewards by 50%'},
  {name: 'Shell Company', price: 1000, currency: 'dollars', effect: 'Converts points to dollars periodically'},
  {name: 'Offshore Account', price: 2000, currency: 'dollars', effect: 'Protects 50% of dollars during FBI raids'},
  {name: 'Crypto Exchange', price: 1500, currency: 'dollars', effect: 'Convert dollars to crypto at 1:1 rate'},
  {name: 'Money Launderer', price: 1500, currency: 'crypto', effect: 'Convert crypto to dollars at 1:1 rate'},
  {name: 'HackSim 2.2', price: 5000, currency: 'crypto', effect: 'Upgrades to HackSim 2.2 with new features'},
];

const commands = {
  'help': () => print('Available commands: help, scan, hack, clear, status, shop, inventory, analyze, ports, exploit, skip\nFBI agents may appear randomly after scanning. Complete hacks quickly to evade them!'),
  'clear': () => terminal.innerHTML = '',
  'status': () => print(`Level: ${level}\nPoints: ${points}\nSystems Hacked: ${hackedSystems}\nCrypto: ${crypto}\nCash: $${dollars}`),
  'scan': scan,
  'hack': initiateHack,
  'shop': showShop,
  'buy': (itemName) => buy(itemName),
  'inventory': showInventory,
  'analyze': analyze,
  'ports': checkPorts,
  'exploit': runExploit,
  'tutorial': () => {
    tutorial.active = true;
    tutorial.currentStep = 0;
    tutorial.showNext();
  },
  'skip': skipTutorial
};

let currentTarget = null;
let portsOpened = 0;
let exploitRun = false;

function print(text, className = '') {
  if (inventory['HackSim 2.2']) {
    TYPE_SPEED = 15; // Faster typing
    if (className) {
      className += ' v2-text';
    } else {
      className = 'v2-text';
    }
  }
  const p = document.createElement('p');
  p.className = className;
  let index = 0;
  
  const cursor = document.createElement('span');
  cursor.className = 'cursor anim';
  cursor.textContent = '█';
  p.appendChild(cursor);
  
  terminal.appendChild(p);
  
  if(logo.style.opacity === '1') {
    terminal.scrollTop = terminal.scrollHeight;
  }

  function typeNextChar() {
    if (index < text.length) {
      const char = text.charAt(index);
      const textNode = document.createTextNode(char);
      p.insertBefore(textNode, cursor);
      index++;
      if(logo.style.opacity === '1') {
        terminal.scrollTop = terminal.scrollHeight;
      }
      setTimeout(typeNextChar, TYPE_SPEED);
    } else {
      cursor.remove();
    }
  }

  typeNextChar();
}

function updateInventory() {
  toolsEl.innerHTML = Object.entries(inventory)
    .map(([item, count]) => `${item}: ${count}`)
    .join('<br>');
}

function showInventory() {
  print('Your Tools:');
  Object.entries(inventory).forEach(([item, count]) => {
    print(`${item}: ${count}`);
  });
  checkTutorial('inventory');
}

function checkPorts() {
  if (!currentTarget) {
    print('No target selected. Use "scan" first.', 'error');
    return;
  }
  if (inventory['Port Scanner'] > 0 || inventory['Port Cracker'] > 0) {
    portsOpened++;
    print('Opening port...', 'success');
    print(`Required ports: ${currentTarget.ports}`);
    print(`Opened ports: ${portsOpened}`);
    checkTutorial('ports');
  } else {
    print('No port scanning tools available!', 'error');
  }
}

function runExploit() {
  if (!currentTarget) {
    print('No target selected. Use "scan" first.', 'error');
    return;
  }
  if (exploitRun) {
    print('Exploit already deployed on this target.', 'error');
    return;
  }

  const exploitMessages = [
    'Initializing exploit vectors...',
    'Bypassing security measures...',
    'Injecting payload...',
    'Establishing backdoor...',
    'Exploit successfully deployed!'
  ];

  let messageIndex = 0;
  
  function showNextMessage() {
    if (messageIndex < exploitMessages.length - 1) {
      print(exploitMessages[messageIndex]);
      messageIndex++;
      setTimeout(showNextMessage, 800);
    } else {
      exploitRun = true;
      print(exploitMessages[messageIndex], 'success');
      checkTutorial('exploit');
    }
  }
  
  showNextMessage();
}

function showShop() {
  print('Available Items:');
  print('Crypto Items:', 'info');
  shop.filter(item => item.currency === 'crypto').forEach(item => {
    print(`${item.name} - ${item.price} crypto`, 'warning');
    print(`  Effect: ${item.effect}`, 'warning');
  });
  print('\nDollar Items:', 'info');
  shop.filter(item => item.currency === 'dollars').forEach(item => {
    print(`${item.name} - $${item.price}`, 'warning');
    print(`  Effect: ${item.effect}`, 'warning');
  });
  print('Use "buy <item name>" to purchase');
  checkTutorial('shop');
}

function buy(itemName) {
  const item = shop.find(i => i.name.toLowerCase() === itemName.toLowerCase());
  if (!item) {
    print('Item not found in shop', 'error');
    return;
  }

  const currency = item.currency === 'crypto' ? crypto : dollars;
  if (currency < item.price) {
    print(`Not enough ${item.currency}!`, 'error');
    return;
  }
  
  if (item.currency === 'crypto') {
    crypto -= item.price;
  } else {
    dollars -= item.price;
  }
  
  inventory[item.name] = (inventory[item.name] || 0) + 1;
  print(`Purchased ${item.name}!`, 'success');
  updateStats();
  updateInventory();
}

function analyze() {
  if (!currentTarget) {
    print('No target selected. Use "scan" first.', 'error');
    return;
  }
  
  print(`Analyzing ${currentTarget.name}...`);
  print(`Difficulty Level: ${currentTarget.difficulty}`, 'warning');
  print(`Required Ports: ${currentTarget.ports}`, 'warning');
  print(`Potential Reward: ${currentTarget.reward} points`, 'warning');
  print('Steps required:', 'warning');
  print('1. Open required number of ports using port scanners', 'warning');
  print('2. Deploy exploit using "exploit" command', 'warning');
  print('3. Run "hack" command to breach the system', 'warning');
  checkTutorial('analyze');
}

function scan() {
  const scanMessages = [
    'Scanning network...',
    'Searching for vulnerabilities...',
    'Analyzing open ports...',
    'Checking security protocols...'
  ];
  
  let messageIndex = 0;
  
  function showNextMessage() {
    if (messageIndex < scanMessages.length) {
      print(scanMessages[messageIndex]);
      messageIndex++;
      setTimeout(showNextMessage, 1000);
    } else {
      currentTarget = targets[Math.floor(Math.random() * targets.length)];
      portsOpened = 0;
      exploitRun = false;
      
      // System Glitch chance
      if (inventory['System Glitch'] && Math.random() < 0.3) {
        portsOpened = currentTarget.ports;
        print('System Glitch activated - All ports opened!', 'success');
      }
      
      print(`Found vulnerable ${currentTarget.name}!`, 'success');
      
      // Auto-Scanner chance
      if (inventory['Auto-Scanner'] && Math.random() < 0.5) {
        print('Auto-Scanner activated!', 'success');
        setTimeout(() => commands['analyze'](), 1000);
      } else {
        print('Use "analyze" for target details', 'warning');
      }
      
      if (inventory['HackSim 2.2']) {
        currentTarget.reward *= 1.5; // 50% more base rewards
        print('HackSim 2.2: Target analysis enhanced!', 'success');
        print(`Estimated completion time: ${Math.floor(Math.random() * 10) + 5}s`, 'info');
        print(`Security level: ${Math.floor(Math.random() * 5) + 1}/5`, 'info');
      }
      
      if (!fbiAgent.active && Math.random() < (level * 0.1)) {
        startFBIEncounter();
      }
      
      checkTutorial('scan');
    }
  }
  
  showNextMessage();
}

function initiateHack() {
  if (!currentTarget) {
    print('No target selected. Use "scan" first.', 'error');
    return;
  }

  if (portsOpened < currentTarget.ports) {
    print(`Not enough ports opened. Required: ${currentTarget.ports}, Opened: ${portsOpened}`, 'error');
    return;
  }

  if (!exploitRun) {
    print('No exploit deployed. Use "exploit" command first.', 'error');
    return;
  }

  let timeLimit = 10000; // Base 10 seconds
  
  if (inventory['Advanced Decoder']) {
    timeLimit += inventory['Advanced Decoder'] * 2000; // +2 seconds per decoder
  }
  
  if (inventory['Time Dilator']) {
    timeLimit *= 1.25; // 25% more time
  }
  
  if (inventory['HackSim 2.2']) {
    timeLimit *= 1.5; // 50% more time
  }
  
  startHackingMinigame(timeLimit);
  checkTutorial('hack');
}

function startHackingMinigame(timeLimit) {
  print('Initiating system breach...');
  const sequence = generateSequence();
  miniGame.style.display = 'block';
  input.disabled = true;
  gameInstruction.textContent = 'Type the sequence exactly to hack the system:';
  sequenceEl.textContent = sequence;
  
  gameInput.value = '';
  gameInput.focus();
  
  let timeoutId = setTimeout(() => {
    miniGame.style.display = 'none';
    input.disabled = false;
    print('Hack failed - Time expired!', 'error');
  }, timeLimit);
  
  gameInput.onkeyup = (e) => {
    if (e.key === 'Enter') {
      clearTimeout(timeoutId);
      if (gameInput.value === sequence) {
        completeHack(true);
      } else {
        completeHack(false);
      }
      miniGame.style.display = 'none';
      input.disabled = false;
      gameInput.onkeyup = null;
    }
  };
}

function generateSequence() {
  const chars = '0123456789ABCDEF';
  let sequence = '';
  for (let i = 0; i < 8; i++) {
    sequence += chars[Math.floor(Math.random() * chars.length)];
  }
  return sequence;
}

function completeHack(success) {
  if (success) {
    let rewardPoints = currentTarget.reward * level;
    let rewardCrypto = Math.floor(currentTarget.reward / 10);
    let rewardDollars = Math.floor(currentTarget.reward / 20);
    
    if (inventory['Reward Doubler']) {
      rewardPoints *= 2;
    }
    
    if (inventory['Crypto Amplifier']) {
      rewardCrypto = Math.floor(rewardCrypto * 1.5);
    }

    if (inventory['Business Front']) {
      rewardDollars = Math.floor(rewardDollars * 1.5);
    }
    
    if (inventory['HackSim 2.2']) {
      rewardPoints *= 2;
      rewardCrypto *= 2; 
      rewardDollars *= 2;
      
      if (Math.random() < 0.3) {
        const bonus = Math.floor(Math.random() * 100) + 50;
        crypto += bonus;
        dollars += bonus;
        print(`HackSim 2.2 Bonus: ${bonus} crypto and $${bonus}!`, 'success');
      }
    }
    
    print(`Successfully hacked ${currentTarget.name}!`, 'success');
    points += rewardPoints;
    crypto += rewardCrypto;
    dollars += rewardDollars;
    hackedSystems++;
    
    print(`Rewards: ${rewardPoints} points, ${rewardCrypto} crypto, $${rewardDollars}`, 'success');
    
    if (fbiAgent.active) {
      endFBIEncounter(true);
    }
    
    if (hackedSystems % 3 === 0) {
      level++;
      print('Level up!', 'success');
      print('All systems are now more difficult but offer better rewards!', 'warning');
    }
  } else {
    print('Hack failed! Incorrect sequence entered.', 'error');
    points = Math.max(0, points - 25);
    
    if (fbiAgent.active) {
      endFBIEncounter(false);
    }
  }

  currentTarget = null;
  progressBar.style.width = '0%';
  updateStats();
}

function updateStats() {
  levelEl.textContent = level;
  pointsEl.textContent = points;
  hackedEl.textContent = hackedSystems;
  cryptoEl.textContent = crypto;
  dollarsEl.textContent = dollars;
}

function checkTutorial(command) {
  if (tutorial.active && tutorial.steps[tutorial.currentStep].command === command) {
    tutorial.currentStep++;
    tutorial.showNext();
  }
}

function startFBIEncounter() {
  if (fbiAgent.active) return;
  
  fbiAgent.active = true;
  fbiAgent.level = Math.min(Math.floor(level * 1.5), 10);
  
  fbiAgent.timeLeft = 30 + (inventory['Anti-Trace VPN'] ? 10 : 0);
  
  if (inventory['HackSim 2.2']) {
    fbiAgent.timeLeft += 20; // Extra 20 seconds
    print('HackSim 2.2: Enhanced FBI protection activated!', 'success');
  }
  
  print('!!! FBI AGENT DETECTED !!!', 'fbi-alert');
  print('Agent is attempting to trace your connection!', 'error');
  print('You must complete a hack within the time limit or lose crypto!', 'error');
  
  fbiStatusEl.style.display = 'block';
  updateFBIStatus();
  
  fbiAgent.interval = setInterval(() => {
    fbiAgent.timeLeft--;
    updateFBIStatus();
    
    if (fbiAgent.timeLeft <= 0) {
      endFBIEncounter(false);
    }
  }, 1000);
}

function endFBIEncounter(escaped) {
  clearInterval(fbiAgent.interval);
  fbiAgent.active = false;
  fbiStatusEl.style.display = 'none';
  
  if (escaped) {
    print('Successfully evaded FBI trace!', 'success');
    const cryptoReward = 100 * fbiAgent.level;
    const dollarsReward = 50 * fbiAgent.level;
    const pointsReward = 250 * fbiAgent.level;
    
    crypto += cryptoReward;
    dollars += dollarsReward;
    points += pointsReward;
    
    print(`Bonus reward: ${cryptoReward} crypto, $${dollarsReward}, and ${pointsReward} points!`, 'success');
  } else {
    print('FBI agent successfully traced your location!', 'error');
    const cryptoLoss = 50 * fbiAgent.level;
    let dollarsLoss = 25 * fbiAgent.level;
    
    if (inventory['Offshore Account']) {
      dollarsLoss = Math.floor(dollarsLoss * 0.5);
      print('Offshore Account protected 50% of your dollars!', 'success');
    }
    
    print(`Lost ${cryptoLoss} crypto and $${dollarsLoss}!`, 'error');
    crypto = Math.max(0, crypto - cryptoLoss);
    dollars = Math.max(0, dollars - dollarsLoss);
  }
  
  updateStats();
}

function updateFBIStatus() {
  agentLevelEl.textContent = fbiAgent.level;
  agentTimerEl.textContent = fbiAgent.timeLeft;
}

function skipTutorial() {
  tutorial.active = false;
  tutorial.currentStep = tutorial.steps.length;
  tutorialPopup.style.display = 'none';
  input.classList.remove('tutorial-highlight');
  print('Tutorial skipped. Type "help" for available commands.', 'info');
}

input.addEventListener('keyup', (e) => {
  if (e.key === 'Enter') {
    const fullCmd = input.value.toLowerCase().trim();
    print(`> ${fullCmd}`);
    input.classList.remove('tutorial-highlight');
    
    const [cmd, ...args] = fullCmd.split(' ');
    
    if (cmd === 'buy' && args.length > 0) {
      buy(args.join(' '));
    } else if (commands[cmd]) {
      commands[cmd]();
    } else {
      print('Unknown command. Type "help" for available commands.', 'error');
    }
    
    input.value = '';
  }
});

skipTutorialBtn.addEventListener('click', skipTutorial);

setInterval(() => {
  if (inventory['Crypto Miner']) {
    const amount = inventory['Crypto Miner'] * 5;
    crypto += amount;
    updateStats();
  }
}, 10000);

setInterval(() => {
  if (inventory['Cash Register']) {
    const amount = inventory['Cash Register'] * 5;
    dollars += amount;
    updateStats();
  }
  
  if (inventory['Shell Company']) {
    const pointsToConvert = Math.min(points, 100 * inventory['Shell Company']);
    if (pointsToConvert >= 100) {
      const dollarsEarned = Math.floor(pointsToConvert / 100);
      points -= dollarsEarned * 100;
      dollars += dollarsEarned;
      updateStats();
    }
  }
}, 30000);

setInterval(() => {
  if (inventory['Money Launderer'] && crypto >= 100) {
    const cryptoToConvert = Math.min(crypto, 100 * inventory['Money Launderer']);
    const dollarsEarned = Math.floor(cryptoToConvert / 100 * 1.5); // 1.5x better rate
    crypto -= cryptoToConvert;
    dollars += dollarsEarned;
    updateStats();
  }
}, 15000);

setInterval(() => {
  if (inventory['Crypto Exchange'] && dollars >= 100) {
    const dollarsToConvert = Math.min(dollars, 100 * inventory['Crypto Exchange']);
    const cryptoEarned = dollarsToConvert; // 1:1 conversion rate
    dollars -= dollarsToConvert;
    crypto += cryptoEarned;
    updateStats();
  }

  if (inventory['Money Launderer'] && crypto >= 100) {
    const cryptoToConvert = Math.min(crypto, 100 * inventory['Money Launderer']);
    const dollarsEarned = cryptoToConvert; // 1:1 conversion rate
    crypto -= cryptoToConvert;
    dollars += dollarsEarned;
    updateStats();
  }
}, 10000);

const logo = document.getElementById('logo');
logo.style.opacity = '0';

setTimeout(() => {
  logo.style.transition = 'opacity 2s';
  logo.style.opacity = '1';
}, 100);

print('Welcome to HackSim v1.0');
if (inventory['HackSim 2.2']) {
  print('UPGRADED to HackSim v2.2!', 'success');
  print('Features: Enhanced rewards, Better FBI protection, Improved visuals', 'info');
}
print('Starting tutorial...', 'info'); 
print('Type "help" for available commands or "tutorial" to restart the tutorial.', 'info');
updateInventory();
tutorial.showNext();
</script>

</body></html>