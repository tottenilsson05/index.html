<meta charset="UTF-8">
<style>
body {
    margin: 0;
    padding: 0;
    background: #000;
    font-family: 'Courier New', monospace;
    color: #0f0;
    overflow: hidden;
}

#terminal {
    padding: 20px;
    height: 100vh;
    box-sizing: border-box;
}

.glitch {
    animation: glitch 1s infinite;
    position: relative;
}

@keyframes glitch {
    0% { transform: translate(0) }
    20% { transform: translate(-2px, 2px) }
    40% { transform: translate(-2px, -2px) }
    60% { transform: translate(2px, 2px) }
    80% { transform: translate(2px, -2px) }
    100% { transform: translate(0) }
}

.ascii-art {
    white-space: pre;
    font-size: 12px;
    line-height: 12px;
    margin: 20px 0;
}

.cursor {
    animation: blink 1s infinite;
}

@keyframes blink {
    0%, 49% { opacity: 1 }
    50%, 100% { opacity: 0 }
}

#error-box {
    color: #f00;
    margin: 20px 0;
}

.progress-bar {
    width: 100%;
    height: 20px;
    background: #111;
    margin: 10px 0;
    position: relative;
}

.progress {
    width: 0%;
    height: 100%;
    background: #0f0;
    transition: width 0.5s;
    position: absolute;
}

.choices {
    margin-top: 20px;
}

.choice-btn {
    background: #111;
    color: #0f0;
    border: 1px solid #0f0;
    padding: 10px 20px;
    margin: 5px;
    cursor: pointer;
    transition: all 0.3s;
}

.choice-btn:hover {
    background: #0f0;
    color: #000;
}

.success {
    color: #0f0;
    font-size: 1.2em;
    text-align: center;
    margin-top: 20px;
}

.failure {
    color: #f00;
    font-size: 1.2em;
    text-align: center;
    margin-top: 20px;
}

.magafish-image {
    display: block;
    margin: 20px auto;
    max-width: 300px;
}

@keyframes victoryPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.victory-animation {
    animation: victoryPulse 2s infinite;
}
</style>
</head>
<body>
<div id="terminal">
    <div class="glitch">INITIALIZING $MAGAFISH.EXE...</div>
    <img src="magafish.png" alt="MAGAFISH" class="magafish-image">
    <div class="ascii-art">
    ><(((º>
      |
     / \
    </div>
    <div class="progress-bar">
        <div class="progress" id="load-progress"></div>
    </div>
    <div id="error-box"></div>
    <div id="output"></div>
    <div id="choices" class="choices" style="display: none;">
        <button class="choice-btn" onclick="makeChoice('fight')">SWIM UPSTREAM</button>
        <button class="choice-btn" onclick="makeChoice('flee')">GO WITH THE FLOW</button>
    </div>
    <span class="cursor">█</span>
</div>

<script>
const errorMessages = [
    "ERROR: Water pollution levels critical",
    "WARNING: Predator detected in vicinity",
    "CRITICAL: Oxygen levels decreasing",
    "ALERT: Multiple fishing nets detected",
    "WARNING: Current speed exceeds safe parameters"
];

const statusMessages = [
    "Loading fish parameters...",
    "Generating ocean currents...",
    "Spawning marine life...",
    "Calculating migration patterns...",
    "Initializing swim bladder...",
    "Loading scale textures...",
    "Configuring shoal protocols...",
    "CRITICAL DECISION REQUIRED"
];

const output = document.getElementById('output');
const progress = document.getElementById('load-progress');
const errorBox = document.getElementById('error-box');
const choices = document.getElementById('choices');

let currentProgress = 0;
let messageIndex = 0;

function typeWriter(text, element) {
    let i = 0;
    const speed = 50;
    
    function type() {
        if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(type, speed);
        }
    }
    
    element.innerHTML = '';
    type();
}

function makeChoice(choice) {
    choices.style.display = 'none';
    
    if (choice === 'fight') {
        // Good ending
        output.innerHTML = '';
        typeWriter("INITIATING UPSTREAM MIGRATION...", output);
        setTimeout(() => {
            errorBox.innerHTML = '';
            errorBox.className = 'success victory-animation';
            typeWriter("SPAWNING GROUNDS REACHED! SPECIES SURVIVAL ASSURED! YOU ARE THE ALPHA FISH!", errorBox);
            setTimeout(() => {
                window.location.href = "https://www.fisheries.noaa.gov/";
            }, 5000);
        }, 2000);
    } else {
        // Bad ending
        output.innerHTML = '';
        typeWriter("FOLLOWING DOWNSTREAM CURRENT...", output);
        setTimeout(() => {
            errorBox.innerHTML = '';
            errorBox.className = 'failure glitch';
            typeWriter("SWEPT INTO DEEP OCEAN. SPAWNING FAILED. GAME OVER.", errorBox);
            setTimeout(() => {
                document.body.style.animation = "glitch 0.2s infinite";
                setTimeout(() => {
                    window.location.href = "https://www.fisheries.noaa.gov/";
                }, 3000);
            }, 2000);
        }, 2000);
    }
}

function updateProgress() {
    if (currentProgress < 100) {
        currentProgress += Math.random() * 15;
        if (currentProgress > 100) currentProgress = 100;
        
        progress.style.width = currentProgress + '%';
        
        if (messageIndex < statusMessages.length) {
            typeWriter(statusMessages[messageIndex], output);
            messageIndex++;
            
            if (messageIndex === statusMessages.length) {
                setTimeout(() => {
                    choices.style.display = 'block';
                }, 1000);
            }
        }
        
        if (Math.random() < 0.3) {
            const randomError = errorMessages[Math.floor(Math.random() * errorMessages.length)];
            typeWriter(randomError, errorBox);
        }
        
        if (messageIndex < statusMessages.length) {
            setTimeout(updateProgress, 1000);
        }
    }
}

updateProgress();
</script>
</body></html>