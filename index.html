<html>
<head>
  <title>Rorschach Visualizer</title>
  <link rel="stylesheet" href="styles.css">
  
  <!-- Import maps need to be before any module scripts -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.158.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.158.0/examples/jsm/"
    }
  }
  </script>

  <script type="module" src="main.js"></script>
</head>
<body>
  <div id="container"></div>
  <div id="ascii-container">
    <pre id="asciiCanvas"></pre>
  </div>
  
  <div id="loading-screen">
    <div class="spinner"></div>
    <p>Loading...</p>
  </div>

  <div id="radio-player">
    <h3>Internet Radio</h3>
    <select id="station-select"></select>
    <audio id="audio-player" controls></audio>
  </div>

  <div class="controls">
    <div class="display-mode">
      <label>
        Display Mode:
        <select id="display-mode">
          <option value="3d">3D</option>
          <option value="ascii">ASCII</option>
        </select>
      </label>
    </div>

    <div class="sliders">
      <label>
        Evolution Speed:
        <input type="range" id="speed" min="1" max="10" value="5">
      </label>
      <label>
        Complexity:
        <input type="range" id="complexity" min="5" max="50" value="20">
      </label>
    </div>

    <div class="color-picker">
      <label>
        Color Palette:
        <select id="color-palette">
          <option value="bloodfire">Bloodfire</option>
          <option value="voidPlasma">Void Plasma</option>
          <option value="hellscape">Hellscape</option>
          <option value="demonicGlow">Demonic Glow</option>
          <option value="unholyAura">Unholy Aura</option>
        </select>
      </label>
    </div>

    <div class="shape-presets">
      <label>
        Shape Inspiration:
        <select id="shape-preset">
          <option value="cycledBlots">Cycle of Torment</option>
          <option value="random">Random BrainStems</option>
          <option value="demonFace">Demon Face</option>
          <option value="titanFace">Titan Face</option>
          <option value="ghostFace">Ghost Face</option>
          <option value="undeadBrain">Undead Brain</option>
          <option value="voidBrain">Void Brain</option>
          <option value="hellButterfly">Hell Butterfly</option>
          <option value="demonicBat">Demonic Bat</option>
          <option value="cursedOwl">Cursed Owl</option>
          <option value="hellhound">Hellhound</option>
        </select>
      </label>
    </div>

    <label class="checkbox-label">
      <input type="checkbox" id="infinite-morph">
      Infinite Shape Morphing
    </label>

    <div class="audio-visualization">
      <!-- Audio Reactivity controls will be added dynamically -->
    </div>

    <button id="regenerate">Regenerate</button>
    <button id="reset">Reset Position</button>
    <button id="save-image">Save Image</button>
    <button id="fullscreen">Fullscreen</button>
    <button id="help">Help</button>
  </div>

  <div id="help-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>How to Use</h2>
      <p>Click and drag to invert colors and morph shapes</p>
      <p>Use mouse wheel to zoom in/out</p>
      <p>Adjust sliders to control animation speed and complexity</p>
      <p>Choose different color palettes and shape presets</p>
      <p>Enable infinite morphing to keep shapes changing</p>
      <p>Use the audio visualization modes with music</p>
    </div>
  </div>
</body>
</html>